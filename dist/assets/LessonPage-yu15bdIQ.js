import{j as s,r as e}from"./ui-TGZcG2us.js";import{u as a}from"./i18n-CEt-f-Oq.js";import{c as t}from"./siteData-bPMxnzhu.js";import{b as l,L as r}from"./router-J9d5hOrj.js";import{C as c,T as n,W as i,h as x,A as d}from"./icons-CGc_vNo5.js";import"./vendor-DholdlZV.js";const m=({current:e,total:t,label:l,showPercentage:r=!0,className:c=""})=>{const{t:n}=a(),i=Math.round(e/t*100);return s.jsxs("div",{className:`mb-6 ${c}`,children:[l&&s.jsxs("div",{className:"flex justify-between text-sm mb-2 text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:l}),s.jsxs("span",{children:[e," из ",t,r&&` (${i}%)`]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${i}%`},role:"progressbar","aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":t,"aria-label":l||n("progress")})})]})},o=()=>{const{t:o}=a(),{courseId:h,lessonId:j}=l(),[u,p]=e.useState(0),[b,N]=e.useState(!1),f=t.find(s=>s.id===h),g=null==f?void 0:f.lessons.find(s=>s.id===j);if(!f||!g)return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:o("page_not_found")}),s.jsx(r,{to:"/courses",className:"btn-primary text-white no-underline",children:o("go_home")})]});const y=g.steps.length,v=u===y-1;if(b)return s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center card-autism-friendly",children:[s.jsx(c,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-green-600 mb-4",children:o("lesson_completed")}),s.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:['Отличная работа! Вы успешно завершили урок "',o(g.title),'"']}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(r,{to:`/courses/${h}`,className:"btn-primary text-white no-underline",children:o("back_to_course")}),s.jsx("button",{onClick:()=>{N(!1),p(0)},className:"btn-secondary",children:"Повторить урок"})]})]})});const w=g.steps[u];return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"breadcrumb",children:[s.jsx(r,{to:"/courses",className:"hover:text-blue-600",children:o("courses")}),s.jsx("span",{className:"breadcrumb-separator",children:"→"}),s.jsx(r,{to:`/courses/${h}`,className:"hover:text-blue-600",children:o(f.title)}),s.jsx("span",{className:"breadcrumb-separator",children:"→"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:o(g.title)})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-high-contrast mb-4",children:o(g.title)}),s.jsxs("div",{className:"card-autism-friendly mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(n,{className:"w-5 h-5 text-blue-500"}),s.jsxs("span",{className:"font-semibold",children:[o("lesson_goal"),":"]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:o(g.goal)})]}),g.tools&&g.tools.length>0&&s.jsxs("div",{className:"card-autism-friendly mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(i,{className:"w-5 h-5 text-orange-500"}),s.jsxs("span",{className:"font-semibold",children:[o("lesson_tools"),":"]})]}),s.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:g.tools.map((e,a)=>s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-400 rounded-full"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:e})]},a))})]}),s.jsx(m,{current:u+1,total:y,label:`${o("lesson_steps")} (${u+1} из ${y})`})]}),s.jsxs("div",{className:"card-autism-friendly mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold",children:u+1}),s.jsx("h2",{className:"text-xl font-bold text-high-contrast",children:w.title})]}),s.jsx("div",{className:"prose prose-lg max-w-none",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:w.text})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("button",{onClick:()=>{p(s=>Math.max(s-1,0))},disabled:0===u,className:"btn-secondary flex items-center space-x-2 "+(0===u?"opacity-50 cursor-not-allowed":""),children:[s.jsx(x,{className:"w-4 h-4"}),s.jsx("span",{children:o("prev_lesson")})]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[u+1," из ",y]}),s.jsxs("button",{onClick:()=>{v?N(!0):p(s=>Math.min(s+1,y-1))},className:"btn-primary flex items-center space-x-2",children:[s.jsx("span",{children:v?"Завершить":o("next_lesson")}),v?s.jsx(c,{className:"w-4 h-4"}):s.jsx(d,{className:"w-4 h-4"})]})]})]})};export{o as default};

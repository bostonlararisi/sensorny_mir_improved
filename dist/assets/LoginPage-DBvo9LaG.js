var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;import{r as n,j as i}from"./ui-TGZcG2us.js";import{u as c}from"./index-RkbpfU_V.js";import{u as d}from"./i18n-CEt-f-Oq.js";import{c as m,u,L as x}from"./router-J9d5hOrj.js";import{j as p,k as h,E as b,l as y,m as f}from"./icons-CGc_vNo5.js";import"./vendor-DholdlZV.js";const g=()=>{var e,g;const{t:j}=d(),v=m(),w=u(),{login:N}=c(),[k,O]=n.useState({email:"",password:""}),[P,S]=n.useState(!1),[C,E]=n.useState(!1),[q,z]=n.useState(""),D=(null==(g=null==(e=w.state)?void 0:e.from)?void 0:g.pathname)||"/",F=e=>{const{name:n,value:i}=e.target;O(e=>{return c=((e,r)=>{for(var t in r||(r={}))a.call(r,t)&&o(e,t,r[t]);if(s)for(var t of s(r))l.call(r,t)&&o(e,t,r[t]);return e})({},e),r(c,t({[n]:i}));var c}),q&&z("")};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Вход в систему"}),i.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Или"," ",i.jsx(x,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"создайте новый аккаунт"})]})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:e=>{return r=null,t=null,s=function*(){if(e.preventDefault(),E(!0),z(""),!k.email||!k.password)return z("Пожалуйста, заполните все поля"),void E(!1);const r=yield N(k.email,k.password);r.success?v(D,{replace:!0}):z(r.error||"Ошибка входа в систему"),E(!1)},new Promise((a,l)=>{var o=r=>{try{i(s.next(r))}catch(e){l(e)}},n=r=>{try{i(s.throw(r))}catch(e){l(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,n);i((s=s.apply(r,t)).next())});var r,t,s},children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email адрес"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(p,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:k.email,onChange:F,className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email адрес"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"sr-only",children:"Пароль"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(h,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"password",name:"password",type:P?"text":"password",autoComplete:"current-password",required:!0,value:k.password,onChange:F,className:"appearance-none relative block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Пароль"}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>S(!P),children:P?i.jsx(b,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):i.jsx(y,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),q&&i.jsxs("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400 text-sm",children:[i.jsx(f,{className:"h-4 w-4"}),i.jsx("span",{children:q})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("div",{className:"text-sm",children:i.jsx(x,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Забыли пароль?"})})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:C,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:C?"Вход...":"Войти"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Демо аккаунты для тестирования:"}),i.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-500 dark:text-gray-500",children:[i.jsx("p",{children:"Администратор: admin@sensornymir.ru / любой пароль"}),i.jsx("p",{children:"Пользователь: user@example.com / любой пароль"})]})]})]})]})})};export{g as default};
